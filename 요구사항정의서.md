# **전차의 이미지 기반 표적 자동 조준 시스템**

## 전차 표적 자동 조준 프로젝트 진행 시 전차의 필요 동작/기능

### 시뮬레이터 선정

[전차 시뮬레이터 (이하 Tank Challenge)](https://bangbaedong-vallet-co-ltd.gitbook.io/tank-challenge)

### 전차의 기능

1. 전방/주변 객체 탐지
2. 위협 상황 분석 및 판단
3. 목표 자동조준 및 제어
4. 대상 거리 측정 및 보정

### 알고리즘 참고 문헌

-

## 전차 자율주행 시스템 세부 정리표

### 프로젝트 목적 요약

| **항목**   | **내용**                                                                             |
| ---------- | ------------------------------------------------------------------------------------ |
| 시뮬레이터 | 제공된 시뮬레이션 엔진 (3D 전차, 유니티 엔진진)                                      |
| 주요 기능  | 주변 상황 파악, 위협 판단, 자동 조준, 거리 측정정                                    |
| 사용 기술  | 영상 인식 기술, 행동 분석 기술, 3D 위치 측정 기술, 자동 제어 기술, 예측 및 보정 기술 |
| 개발 목표  | 안정성 향상, 정확한 목표 조준, 실시간 반응, 데이터 처리 최적화                       |

### 사용 알고리즘

| **목적**              | **사용 알고리즘**   | **이유**                                |
| --------------------- | ------------------- | --------------------------------------- |
| 오브젝트 탐지         | YOLOv8              | 격자 기반 빠른 탐지, 실시간 처리에 용이 |
| 움직임·조준 행동 파악 | SlowFast            | 시계열 분석, 조준 동작 구별             |
| 거리 계산             | PnP 알고리즘, MiDaS | 카메라와 실제 좌표 연결                 |
| 자동 조준 각도 계산   | Inverse Kinematics  | 위치 정보 기반으로 포신 각도 계산       |
| 예측 보정             | Kalman Filter       | 상대 움직임 예측                        |
| 포신제어 안정화       | PID 제어            | 오차 보정                               |

```mermaid
flowchart LR

    %% 💻 서버 컴퓨터 그룹
    subgraph Server_Computer ["💻 서버 컴퓨터"]
        subgraph Simulator ["🧱 Unity 시뮬레이터"]
            Cam[📷 카메라 영상 장치]
            Lidar[📡 거리 센서 장치]
            IMU[🎯 가속도계 센서 장치]
        end

        subgraph FastAPI_Service ["🌐 FastAPI 서버"]
            Detect[👁 객체 탐지\nYOLOv8]
            Threat[⚠️ 위협 분석\nSlowFast + Kalman]
            Distance[📏 거리 계산\nStereo / PnP / MiDaS]
            Aiming[🎯 조준 계산\nInverse Kinematics]
            ControlGen[🛠 제어 신호 생성\nPID 제어]
            APIConn[🔗 API 통신 모듈]
        end
    end

    %% 🧠 제어 컴퓨터 그룹
    subgraph Control_Computer ["🧠 제어 컴퓨터"]
        subgraph Control_Loop ["🎮 제어 모듈"]
            Controller[🕹 조준 제어 모듈]
        end

        subgraph Monitor_UI ["🖥 웹 대시보드"]
            Dashboard[📊 실시간 상황 표시]
        end
    end

    %% 연결 관계
    Cam --> Detect
    Lidar --> Distance
    IMU --> Threat

    Detect --> Threat
    Threat --> Distance
    Distance --> Aiming
    Aiming --> ControlGen
    ControlGen --> Controller
    APIConn --> Controller

    APIConn --> Dashboard

    %% 스타일: 서브그래프 배경
    style Server_Computer fill:#F0F8FF,stroke:#004080,stroke-width:2px
    style Simulator fill:#E8F0FE,stroke:#6699CC,stroke-width:1px
    style FastAPI_Service fill:#F5F9FF,stroke:#3366CC,stroke-width:1px

    style Control_Computer fill:#FFF5E6,stroke:#CC6600,stroke-width:2px
    style Control_Loop fill:#FFF1CC,stroke:#FF9900,stroke-width:1px
    style Monitor_UI fill:#FFFAE6,stroke:#FFB84D,stroke-width:1px

    %% 노드 둥글기 스타일
    classDef round_node fill:#FFFFFF,stroke:#333,stroke-width:1px,rx:10,ry:10;
    class Cam,Lidar,IMU,Controller,Dashboard round_node;
```
